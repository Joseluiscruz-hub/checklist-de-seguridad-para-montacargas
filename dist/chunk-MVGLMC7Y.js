import{d as Se}from"./chunk-IH4AE3EP.js";import{a as $,b as H,c as K,d as Ee,e as ce,f as de,g as me,h as Y,i as Ie}from"./chunk-IB5HPKPK.js";import"./chunk-3CY4RGAW.js";import{a as Me}from"./chunk-RGZFVPZW.js";import{$a as G,Cb as M,Db as le,Ga as A,N as oe,Qa as C,Ra as x,S as Q,Sa as ve,Ta as I,Ua as T,Va as v,Wa as o,X as m,Xa as r,Y as p,Ya as f,Za as y,_a as F,a as U,ab as b,b as L,bb as ye,ca as g,cb as u,db as R,eb as d,fb as re,gb as ae,hb as se,ib as ke,jb as w,lb as a,mb as k,nb as B,ob as be,pa as j,qb as D,ra as c,rb as N,sb as O,tb as we,zb as z}from"./chunk-HPYFT727.js";var Te=[{id:"CUA-25097",name:"ECO CUA-25097",model:"General"},{id:"CUA-29439",name:"ECO CUA-29439",model:"General"},{id:"CUA-29440",name:"ECO CUA-29440",model:"General"},{id:"CUA-35482",name:"ECO CUA-35482",model:"General"},{id:"CUA-35483",name:"ECO CUA-35483",model:"General"},{id:"CUA-35494",name:"ECO CUA-35494",model:"General"},{id:"CUA-35526",name:"ECO CUA-35526",model:"General"},{id:"CUA-37191",name:"ECO CUA-37191",model:"General"},{id:"CUA-37193",name:"ECO CUA-37193",model:"General"},{id:"CUA-37194",name:"ECO CUA-37194",model:"General"},{id:"CUA-37195",name:"ECO CUA-37195",model:"General"},{id:"CUA-40019",name:"ECO CUA-40019",model:"General"},{id:"CUA-40020",name:"ECO CUA-40020",model:"General"},{id:"CUA-40021",name:"ECO CUA-40021",model:"General"},{id:"CUA-40057",name:"ECO CUA-40057",model:"General"},{id:"CUA-40060",name:"ECO CUA-40060",model:"General"},{id:"CUA-40327",name:"ECO CUA-40327",model:"General"},{id:"CUA-40328",name:"ECO CUA-40328",model:"General"},{id:"CUA-40338",name:"ECO CUA-40338",model:"General"},{id:"CUA-26786",name:"ECO CUA-26786",model:"General"}],Ve=[{name:"CRACK'S",color:"#f472b6"},{name:"X-MEN",color:"#4ade80"},{name:"GLADIADORES",color:"#22d3ee"},{name:"ARMAGED\xD3N",color:"#facc15"}],Ae=["LINEAS","CORTADORA","BUFFER","FLETEO","MP","JARABES"],h={MAIN:"Revisi\xF3n General",SECURITY:"Dispositivos de Seguridad",INVENTORY:"Inventario de Vidrio y Pl\xE1stico R\xEDgido"},Fe=[{id:"steering_wheel",label:"Volante en buen estado. Realizar pruebas de movilidad.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"fork_levers",label:"Palancas de control de horquillas en buen estado y funcionando correctamente. Realizar pruebas.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"pedals",label:"Pedales de aceleraci\xF3n y frenado funcionan adecuadamente. Realizar prueba.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"lights",label:"Faros de reversa, Faros Delanteros y torreta funcionando correctamente.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"tires",label:"Llantas motrices y direccionales en buen estado, pernos bien ajustados.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"gas_tank",label:"Tanque de gas sin golpes, sin fuga, con mangueras y man\xF3metro funcionando.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"extinguisher",label:"Extintor en base, con carga y registro de inspecci\xF3n actualizado.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"seat",label:"Asiento en \xF3ptimas condiciones.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"mirrors",label:"2 espejos retrovisores (izquierdo y derecho) en buen estado.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"fluid_levels",label:"Niveles de fluidos correctos (anticongelante, aceite hidr\xE1ulico, motor, frenos).",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"sensors",label:"Sensores de proximidad funcionando correctamente, sin obstrucciones.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"hoses_pulleys",label:"Mangueras sin fugas, poleas en buen estado, conexiones sin fuga y cadenas ajustadas.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"mast_forks",label:"M\xE1stil y horquillas en buen estado, con funcionamiento adecuado.",category:h.MAIN,status:"pending",comment:"",photo:null},{id:"security_brakes",label:"Frenos",category:h.SECURITY,status:"pending",comment:"",photo:null},{id:"security_horn",label:"Claxon",category:h.SECURITY,status:"pending",comment:"",photo:null},{id:"security_reverse_alarm",label:"Alarma de Reversa",category:h.SECURITY,status:"pending",comment:"",photo:null},{id:"security_seatbelt",label:"Cintur\xF3n Seguridad",category:h.SECURITY,status:"pending",comment:"",photo:null},{id:"inventory_rear_lights",label:"3 Calaveras traseras",category:h.INVENTORY,status:"pending",comment:"",photo:null},{id:"inventory_reverse_light",label:"1 Faro de reversa",category:h.INVENTORY,status:"pending",comment:"",photo:null},{id:"inventory_front_quarters",label:"2 Cuartos delanteros",category:h.INVENTORY,status:"pending",comment:"",photo:null},{id:"inventory_front_lights",label:"2 Faros delanteros",category:h.INVENTORY,status:"pending",comment:"",photo:null},{id:"inventory_turret",label:"1 Torreta",category:h.INVENTORY,status:"pending",comment:"",photo:null}];var W=class W{async compressImage(t,e=800,n=600,i=.7){return new Promise((s,_)=>{let S=new Image;S.onload=()=>{let E=S.width,V=S.height;E>e&&(V=V*e/E,E=e),V>n&&(E=E*n/V,V=n);let P=document.createElement("canvas");P.width=E,P.height=V;let ne=P.getContext("2d");if(!ne){_("No se pudo obtener el contexto del canvas");return}ne.drawImage(S,0,0,E,V);let xe=P.toDataURL("image/jpeg",i);s(xe)},S.onerror=()=>{_("Error al cargar la imagen")},S.src=t})}getImageSizeInKB(t){let e=t.length-(t.indexOf(",")+1),n=t.endsWith("==")?2:t.endsWith("=")?1:0;return(e*3/4-n)/1024}validateImageSize(t,e=2048){return this.getImageSizeInKB(t)<=e}};W.\u0275fac=function(e){return new(e||W)},W.\u0275prov=oe({token:W,factory:W.\u0275fac,providedIn:"root"});var pe=W;var q=class q{validateOdometer(t){if(!t||t.trim()==="")return{valid:!1,error:"El od\xF3metro es requerido"};let e=parseInt(t.trim(),10);return isNaN(e)?{valid:!1,error:"El od\xF3metro debe ser un n\xFAmero"}:e<0?{valid:!1,error:"El od\xF3metro no puede ser negativo"}:e>999999?{valid:!1,error:"El od\xF3metro no puede exceder 999,999"}:{valid:!0}}validateRequired(t,e){return!t||t.trim()===""?{valid:!1,error:`${e} es requerido`}:{valid:!0}}validateSignature(t){return!t||t.trim()===""?{valid:!1,error:"La firma es requerida"}:{valid:!0}}validateChecklistCompleted(t){return t.some(n=>n.status!=="pending")?{valid:!0}:{valid:!1,error:"Debe completar al menos un \xEDtem del checklist"}}validateTextLength(t,e=0,n=500){let i=t.trim().length;return i<e?{valid:!1,error:`Debe tener al menos ${e} caracteres`}:i>n?{valid:!1,error:`No puede exceder ${n} caracteres`}:{valid:!0}}};q.\u0275fac=function(e){return new(e||q)},q.\u0275prov=oe({token:q,factory:q.\u0275fac,providedIn:"root"});var ue=q;var Oe=["signatureCanvas"],Re=(l,t)=>t.category,Pe=(l,t)=>t.id;function Ue(l,t){if(l&1){let e=b();o(0,"div",9)(1,"div")(2,"label",17),a(3,"Fecha de Inspecci\xF3n"),r(),o(4,"input",18),O("ngModelChange",function(i){let s=m(e);return N(s.inspectionDate,i)||(s.inspectionDate=i),p(i)}),r()(),o(5,"div")(6,"label",19),a(7,"Od\xF3metro"),r(),o(8,"input",20),O("ngModelChange",function(i){let s=m(e);return N(s.odometer,i)||(s.odometer=i),p(i)}),r()()()}if(l&2){let e=t;c(4),D("ngModel",e.inspectionDate),c(4),D("ngModel",e.odometer)}}function Le(l,t){if(l&1&&f(0,"img",32),l&2){let e=d(2).$implicit;v("src",e.photo,j)}}function je(l,t){if(l&1){let e=b();o(0,"div",30)(1,"input",31),O("ngModelChange",function(i){m(e);let s=d().$implicit;return N(s.comment,i)||(s.comment=i),p(i)}),r(),C(2,Le,1,1,"img",32),r()}if(l&2){let e=d().$implicit;c(),D("ngModel",e.comment),c(),x(e.photo?2:-1)}}function Be(l,t){if(l&1){let e=b();o(0,"div",22)(1,"div",23)(2,"label",24),a(3),r(),o(4,"div",25)(5,"button",26),u("click",function(){let i=m(e).$implicit,s=d(2);return p(s.updateStatus(i,"ok"))}),a(6),r(),o(7,"button",26),u("click",function(){let i=m(e).$implicit,s=d(2);return p(s.updateStatus(i,"issue"))}),a(8),r(),o(9,"button",27),u("click",function(){let i=m(e).$implicit,s=d(2);return p(s.triggerPhotoUpload(i.id))}),f(10,"i",28),r(),o(11,"input",29),u("change",function(i){let s=m(e).$implicit,_=d(2);return p(_.handlePhotoUpload(i,s))}),r()()(),C(12,je,3,2,"div",30),r()}if(l&2){let e=t.$implicit,n=d().$implicit,i=d();c(3),k(e.label),c(2),w("bg-green-500",e.status==="ok")("text-white",e.status==="ok")("bg-gray-200",e.status!=="ok")("dark:bg-gray-600",e.status!=="ok"),c(),k(i.getButtonLabels(n.category).ok),c(),w("bg-red-500",e.status==="issue")("text-white",e.status==="issue")("bg-gray-200",e.status!=="issue")("dark:bg-gray-600",e.status!=="issue"),c(),k(i.getButtonLabels(n.category).issue),c(),w("text-coca-cola-red",e.photo),c(2),v("id",we("photo-upload-",e.id)),c(),x(e.status==="issue"?12:-1)}}function ze(l,t){if(l&1&&(o(0,"section")(1,"h3",11),a(2),r(),o(3,"div",21),I(4,Be,13,24,"div",22,Pe),r()()),l&2){let e=t.$implicit;c(2),k(e.category),c(2),T(e.items)}}var X=class X{constructor(){this.imageService=Q(pe);this.validationService=Q(ue);this.inspection=le.required();this.save=M();this.close=M();this.localInspection=g(null);this.validationErrors=g({});this.isCompressingImage=g(!1);this.groupedChecklist=z(()=>{let t=this.localInspection();if(!t)return[];let e=t.checklist.reduce((n,i)=>((n[i.category]=n[i.category]||[]).push(i),n),{});return Object.entries(e).map(([n,i])=>({category:n,items:i}))})}ngOnInit(){let t=JSON.parse(JSON.stringify(this.inspection()));t.inspectionDate||(t.inspectionDate=new Date().toISOString().split("T")[0]),typeof t.odometer>"u"&&(t.odometer=""),t.signature||(t.signature=null),this.localInspection.set(t)}ngAfterViewInit(){if(this.signatureCanvas){let t=this.signatureCanvas.nativeElement;this.signaturePad=new SignaturePad(t);let e=this.localInspection()?.signature;e&&this.signaturePad.fromDataURL(e)}}getButtonLabels(t){return t==="Dispositivos de Seguridad"||t==="Inventario de Vidrio y Pl\xE1stico R\xEDgido"?{ok:"S\xED",issue:"No"}:{ok:"Cumple",issue:"No Cumple"}}updateStatus(t,e){this.localInspection.update(n=>{if(n){let i=n.checklist.find(s=>s.id===t.id);i&&(i.status=e)}return n})}async handlePhotoUpload(t,e){let n=t.target;if(n.files&&n.files[0]){let i=n.files[0];if(i.size>5*1024*1024){alert("La imagen es demasiado grande. El tama\xF1o m\xE1ximo es 5MB.");return}this.isCompressingImage.set(!0);let s=new FileReader;s.onload=async()=>{try{let _=s.result,S=this.imageService.getImageSizeInKB(_),E=await this.imageService.compressImage(_),V=this.imageService.getImageSizeInKB(E);console.log(`Imagen comprimida: ${S.toFixed(2)}KB \u2192 ${V.toFixed(2)}KB (${((1-V/S)*100).toFixed(1)}% reducci\xF3n)`),this.localInspection.update(P=>{if(P){let ne=P.checklist.find(xe=>xe.id===e.id);ne&&(ne.photo=E)}return P})}catch(_){console.error("Error al comprimir imagen:",_),alert("Error al procesar la imagen. Por favor, intente con otra imagen.")}finally{this.isCompressingImage.set(!1)}},s.readAsDataURL(i)}}triggerPhotoUpload(t){document.getElementById(`photo-upload-${t}`)?.click()}clearSignature(){this.signaturePad&&this.signaturePad.clear()}onSave(){if(!this.localInspection())return;let t=this.localInspection(),e={},n=this.validationService.validateOdometer(t.odometer);n.valid||(e.odometer=n.error);let i=this.validationService.validateRequired(t.inspector,"Inspector");i.valid||(e.inspector=i.error);let s=this.validationService.validateRequired(t.location,"Ubicaci\xF3n");s.valid||(e.location=s.error);let _=this.validationService.validateChecklistCompleted(t.checklist);_.valid||(e.checklist=_.error),this.signaturePad&&!this.signaturePad.isEmpty()?t.signature=this.signaturePad.toDataURL("image/png"):this.signaturePad&&this.signaturePad.isEmpty()&&(t.signature=null);let S=this.validationService.validateSignature(t.signature);if(S.valid||(e.signature=S.error),Object.keys(e).length>0){this.validationErrors.set(e);let E=Object.values(e).join(`
`);alert(`Por favor corrija los siguientes errores:

${E}`);return}this.validationErrors.set({}),this.save.emit(t)}onClose(){this.close.emit()}};X.\u0275fac=function(e){return new(e||X)},X.\u0275cmp=A({type:X,selectors:[["app-checklist-modal"]],viewQuery:function(e,n){if(e&1&&re(Oe,5),e&2){let i;ae(i=se())&&(n.signatureCanvas=i.first)}},inputs:{inspection:[1,"inspection"]},outputs:{save:"save",close:"close"},decls:26,vars:3,consts:[["signatureCanvas",""],[1,"fixed","inset-0","bg-black","bg-opacity-60","flex","items-center","justify-center","z-50","animate-fade-in",3,"click"],[1,"bg-white","dark:bg-dark-card","rounded-xl","shadow-2xl","w-full","max-w-lg","max-h-[90vh]","flex","flex-col","m-4",3,"click"],[1,"p-4","border-b","dark:border-dark-accent"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-xl","font-bold","text-gray-800","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],[1,"fas","fa-times","text-2xl"],[1,"grid","grid-cols-2","gap-4"],[1,"flex-grow","overflow-y-auto","p-4","space-y-4"],[1,"text-lg","font-semibold","text-gray-800","dark:text-white","mb-2","pb-1","border-b-2","border-coca-cola-red"],[1,"bg-gray-100","dark:bg-dark-accent","rounded-lg","p-2","relative","touch-none"],[1,"w-full","h-40","rounded-md","bg-white"],[1,"absolute","top-3","right-3","text-sm","bg-gray-300","dark:bg-gray-600","hover:bg-gray-400","dark:hover:bg-gray-700","text-gray-800","dark:text-white","font-semibold","py-1","px-3","rounded-md","transition-colors","z-10",3,"click"],[1,"p-4","border-t","dark:border-dark-accent","bg-gray-50","dark:bg-dark-card/50"],[1,"w-full","bg-coca-cola-red","text-white","font-bold","py-3","px-4","rounded-lg","shadow-lg","hover:bg-red-700","transition-colors",3,"click"],["for","inspectionDate",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","date","id","inspectionDate",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],["for","odometer",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","odometer","placeholder","Ej: 12345",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],[1,"space-y-3"],[1,"bg-gray-50","dark:bg-dark-accent","p-3","rounded-lg"],[1,"flex","items-center","justify-between"],[1,"font-semibold","text-gray-700","dark:text-gray-200","flex-1","pr-2"],[1,"flex","items-center","gap-2","flex-shrink-0"],[1,"w-24","py-1","rounded-md","text-sm","font-semibold","transition-colors",3,"click"],[1,"text-gray-500","dark:text-gray-400","hover:text-coca-cola-red","transition-colors","w-10","h-8","flex","items-center","justify-center","rounded-md",3,"click"],[1,"fas","fa-camera","text-lg"],["type","file","accept","image/*","capture","environment",1,"hidden",3,"change","id"],[1,"mt-2","space-y-2"],["type","text","placeholder","A\xF1adir observaciones...",1,"w-full","text-sm","rounded-md","border-gray-300","dark:border-gray-500","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],["alt","Evidencia",1,"max-h-40","rounded-lg","object-cover","shadow-md",3,"src"]],template:function(e,n){if(e&1){let i=b();o(0,"div",1),u("click",function(){return m(i),p(n.onClose())}),o(1,"div",2),u("click",function(_){return m(i),p(_.stopPropagation())}),o(2,"header",3)(3,"div",4)(4,"div")(5,"h2",5),a(6),r(),o(7,"p",6),a(8),r()(),o(9,"button",7),u("click",function(){return m(i),p(n.onClose())}),f(10,"i",8),r()(),C(11,Ue,9,2,"div",9),r(),o(12,"main",10),I(13,ze,6,1,"section",null,Re),o(15,"section")(16,"h3",11),a(17,"Firma del Inspector"),r(),o(18,"div",12),f(19,"canvas",13,0),o(21,"button",14),u("click",function(){return m(i),p(n.clearSignature())}),a(22," Limpiar "),r()()()(),o(23,"footer",15)(24,"button",16),u("click",function(){return m(i),p(n.onSave())}),a(25," Guardar Cambios "),r()()()()}if(e&2){let i,s,_;c(6),B("Checklist: ",(i=n.localInspection())==null?null:i.forkliftName),c(2),B("ID: ",(s=n.localInspection())==null?null:s.forkliftId),c(3),x((_=n.localInspection())?11:-1,_),c(2),T(n.groupedChecklist())}},dependencies:[Y,$,Ee,H,K],encapsulation:2,changeDetection:0});var ge=X;var Ge=["reader"],Z=class Z{constructor(){this.scanSuccess=M();this.scanError=M();this.close=M()}ngAfterViewInit(){this.html5QrCode=new Html5Qrcode(this.readerElement.nativeElement.id),this.startScanning()}startScanning(){let t={fps:10,qrbox:{width:250,height:250}};this.html5QrCode.start({facingMode:"environment"},t,(e,n)=>{this.onScanSuccess(e)},e=>{}).catch(e=>{this.onScanError(e)})}onScanSuccess(t){this.stopScanning(),this.scanSuccess.emit(t)}onScanError(t){this.stopScanning(),this.scanError.emit("Fall\xF3 el escaneo del c\xF3digo QR. Por favor, intente de nuevo.")}onClose(){this.stopScanning(),this.close.emit()}stopScanning(){this.html5QrCode&&this.html5QrCode.isScanning&&this.html5QrCode.stop().catch(t=>console.error("Failed to stop scanner",t))}ngOnDestroy(){this.stopScanning()}};Z.\u0275fac=function(e){return new(e||Z)},Z.\u0275cmp=A({type:Z,selectors:[["app-qr-scanner"]],viewQuery:function(e,n){if(e&1&&re(Ge,5),e&2){let i;ae(i=se())&&(n.readerElement=i.first)}},outputs:{scanSuccess:"scanSuccess",scanError:"scanError",close:"close"},decls:8,vars:0,consts:[["reader",""],[1,"fixed","inset-0","bg-black","bg-opacity-80","flex","flex-col","items-center","justify-center","z-50",3,"click"],[1,"relative","w-full","max-w-md","p-4",3,"click"],["id","qr-reader",1,"w-full","bg-gray-900","rounded-lg","overflow-hidden","border-4","border-gray-600"],[1,"text-white","text-center","mt-4","font-semibold"],[1,"absolute","top-6","right-6","text-white","bg-black","bg-opacity-50","rounded-full","w-8","h-8","flex","items-center","justify-center",3,"click"],[1,"fas","fa-xmark"]],template:function(e,n){if(e&1){let i=b();y(0,"div",1),R("click",function(){return m(i),p(n.onClose())}),y(1,"div",2),R("click",function(_){return m(i),p(_.stopPropagation())}),G(2,"div",3,0),y(4,"p",4),a(5,"Apunte la c\xE1mara a un c\xF3digo QR"),F(),y(6,"button",5),R("click",function(){return m(i),p(n.onClose())}),G(7,"i",6),F()()()}},encapsulation:2,changeDetection:0});var he=Z;var We=(l,t)=>t.id;function qe(l,t){if(l&1&&(o(0,"option",11),a(1),r()),l&2){let e=t.$implicit;v("value",e.id),c(),k(e.name)}}function Qe(l,t){if(l&1&&f(0,"img",20),l&2){let e=d();v("src",e.report().photo,j)}}function $e(l,t){l&1&&(o(0,"p",24),a(1,"Seleccione un montacargas y a\xF1ada una descripci\xF3n."),r())}var ee=class ee{constructor(){this.forklifts=le.required();this.save=M();this.close=M();this.report=g({forkliftId:"",severity:"Media",description:"",photo:null})}isFormValid(){let t=this.report();return t.forkliftId!==""&&t.description.trim()!==""}updateForkliftId(t){this.report.update(e=>L(U({},e),{forkliftId:t}))}updateSeverity(t){this.report.update(e=>L(U({},e),{severity:t}))}updateDescription(t){this.report.update(e=>L(U({},e),{description:t}))}handlePhotoUpload(t){let e=t.target;if(e.files&&e.files[0]){let n=e.files[0],i=new FileReader;i.onload=()=>{this.report.update(s=>L(U({},s),{photo:i.result}))},i.readAsDataURL(n)}}triggerPhotoUpload(){document.getElementById("incident-photo-upload")?.click()}onSave(){this.isFormValid()&&this.save.emit(this.report())}onClose(){this.close.emit()}};ee.\u0275fac=function(e){return new(e||ee)},ee.\u0275cmp=A({type:ee,selectors:[["app-incident-report-modal"]],inputs:{forklifts:[1,"forklifts"]},outputs:{save:"save",close:"close"},decls:45,vars:17,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-60","flex","items-center","justify-center","z-50","animate-fade-in",3,"click"],[1,"bg-white","dark:bg-dark-card","rounded-xl","shadow-2xl","w-full","max-w-lg","max-h-[90vh]","flex","flex-col","m-4",3,"click"],[1,"p-4","border-b","dark:border-dark-accent"],[1,"flex","justify-between","items-center"],[1,"text-xl","font-bold","text-gray-800","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],[1,"fas","fa-times","text-2xl"],[1,"flex-grow","overflow-y-auto","p-4","space-y-4"],["for","forkliftId",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","forkliftId",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"mt-2","grid","grid-cols-3","gap-2"],[1,"py-2","px-4","rounded-md","font-semibold","transition-colors","bg-gray-200","dark:bg-dark-accent",3,"click"],["for","description",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","description","rows","4","placeholder","Describa la falla o el problema en detalle...",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],[1,"mt-2","flex","items-center","gap-4"],[1,"bg-gray-200","dark:bg-dark-accent","hover:bg-gray-300","dark:hover:bg-gray-600","text-gray-700","dark:text-gray-200","font-bold","py-2","px-4","rounded-lg","flex","items-center","gap-2",3,"click"],[1,"fas","fa-camera"],["alt","Evidencia",1,"w-20","h-20","object-cover","rounded-lg","shadow-md",3,"src"],["type","file","accept","image/*","capture","environment","id","incident-photo-upload",1,"hidden",3,"change"],[1,"p-4","border-t","dark:border-dark-accent","bg-gray-50","dark:bg-dark-card/50"],[1,"w-full","bg-coca-cola-red","text-white","font-bold","py-3","px-4","rounded-lg","shadow-lg","hover:bg-red-700","transition-colors","disabled:bg-red-400","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-center","text-red-500","text-sm","mt-2"]],template:function(e,n){e&1&&(o(0,"div",0),u("click",function(){return n.onClose()}),o(1,"div",1),u("click",function(s){return s.stopPropagation()}),o(2,"header",2)(3,"div",3)(4,"h2",4),a(5,"Reportar Incidencia Grave"),r(),o(6,"button",5),u("click",function(){return n.onClose()}),f(7,"i",6),r()()(),o(8,"main",7)(9,"div")(10,"label",8),a(11,"Montacargas"),r(),o(12,"select",9),u("ngModelChange",function(s){return n.updateForkliftId(s)}),o(13,"option",10),a(14,"Seleccione un montacargas"),r(),I(15,qe,2,2,"option",11,We),r()(),o(17,"div")(18,"label",12),a(19,"Nivel de Severidad"),r(),o(20,"div",13)(21,"button",14),u("click",function(){return n.updateSeverity("Baja")}),a(22,"Baja"),r(),o(23,"button",14),u("click",function(){return n.updateSeverity("Media")}),a(24,"Media"),r(),o(25,"button",14),u("click",function(){return n.updateSeverity("Alta")}),a(26,"Alta"),r()()(),o(27,"div")(28,"label",15),a(29,"Descripci\xF3n del Problema"),r(),o(30,"textarea",16),u("ngModelChange",function(s){return n.updateDescription(s)}),r()(),o(31,"div")(32,"label",12),a(33,"Evidencia Fotogr\xE1fica (Opcional)"),r(),o(34,"div",17)(35,"button",18),u("click",function(){return n.triggerPhotoUpload()}),f(36,"i",19),o(37,"span"),a(38,"Adjuntar Foto"),r()(),C(39,Qe,1,1,"img",20),o(40,"input",21),u("change",function(s){return n.handlePhotoUpload(s)}),r()()()(),o(41,"footer",22)(42,"button",23),u("click",function(){return n.onSave()}),a(43," Guardar Reporte "),r(),C(44,$e,2,0,"p",24),r()()()),e&2&&(c(12),v("ngModel",n.report().forkliftId),c(3),T(n.forklifts()),c(6),w("bg-yellow-500",n.report().severity==="Baja")("text-white",n.report().severity==="Baja"),c(2),w("bg-orange-500",n.report().severity==="Media")("text-white",n.report().severity==="Media"),c(2),w("bg-red-600",n.report().severity==="Alta")("text-white",n.report().severity==="Alta"),c(5),v("ngModel",n.report().description),c(9),x(n.report().photo?39:-1),c(3),v("disabled",!n.isFormValid()),c(2),x(n.isFormValid()?-1:44))},dependencies:[Y,de,me,$,ce,H,K],encapsulation:2,changeDetection:0});var _e=ee;var He=(l,t)=>t.name;function Ke(l,t){if(l&1&&(y(0,"a",8)(1,"div",11),G(2,"i",12),y(3,"span",13),a(4),F()(),G(5,"i",14),F()),l&2){let e=t.$implicit;ye("href",e.url,j),c(4),k(e.name)}}var te=class te{constructor(){this.close=M();this.manuals=[{name:"Manual de Operaci\xF3n de Montacargas",url:"#"},{name:"Procedimiento de Seguridad en Almac\xE9n",url:"#"},{name:"Gu\xEDa de Mantenimiento Preventivo",url:"#"},{name:"Protocolo de Respuesta a Emergencias",url:"#"}]}onClose(){this.close.emit()}};te.\u0275fac=function(e){return new(e||te)},te.\u0275cmp=A({type:te,selectors:[["app-manuals-modal"]],outputs:{close:"close"},decls:14,vars:0,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-60","flex","items-center","justify-center","z-50","animate-fade-in",3,"click"],[1,"bg-white","dark:bg-dark-card","rounded-xl","shadow-2xl","w-full","max-w-lg","max-h-[90vh]","flex","flex-col","m-4",3,"click"],[1,"p-4","border-b","dark:border-dark-accent"],[1,"flex","justify-between","items-center"],[1,"text-xl","font-bold","text-gray-800","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],[1,"fas","fa-times","text-2xl"],[1,"flex-grow","overflow-y-auto","p-4","space-y-3"],["target","_blank","rel","noopener noreferrer",1,"flex","items-center","justify-between","p-3","bg-gray-50","dark:bg-dark-accent","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-600","transition-colors",3,"href"],[1,"p-4","border-t","dark:border-dark-accent","bg-gray-50","dark:bg-dark-card/50"],[1,"w-full","bg-gray-600","text-white","font-bold","py-3","px-4","rounded-lg","shadow-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","items-center","gap-3"],[1,"fas","fa-file-pdf","text-coca-cola-red","text-xl"],[1,"font-semibold","text-gray-700","dark:text-gray-200"],[1,"fas","fa-external-link-alt","text-gray-400"]],template:function(e,n){e&1&&(y(0,"div",0),R("click",function(){return n.onClose()}),y(1,"div",1),R("click",function(s){return s.stopPropagation()}),y(2,"header",2)(3,"div",3)(4,"h2",4),a(5,"Consultar Manuales"),F(),y(6,"button",5),R("click",function(){return n.onClose()}),G(7,"i",6),F()()(),y(8,"main",7),I(9,Ke,6,2,"a",8,He),F(),y(11,"footer",9)(12,"button",10),R("click",function(){return n.onClose()}),a(13," Cerrar "),F()()()()),e&2&&(c(9),T(n.manuals))},encapsulation:2,changeDetection:0});var Ce=te;var Ye=(l,t)=>t.name,Je=(l,t)=>t.id;function Xe(l,t){if(l&1){let e=b();o(0,"div",31),u("click",function(){m(e);let i=d(2);return p(i.isProfileMenuOpen.set(!1))}),r(),o(1,"div",32)(2,"div",33)(3,"p",34),a(4),r(),o(5,"p",30),a(6),r()(),f(7,"div",35),o(8,"a",36),u("click",function(i){return m(e),d(2).logout(),p(i.preventDefault())}),a(9,"Cerrar Sesi\xF3n"),r()()}if(l&2){let e=d(2);c(4),k(e.userData.name),c(2),B("ID: ",e.userData.id)}}function Ze(l,t){if(l&1){let e=b();o(0,"div",0)(1,"header",5)(2,"div",6),f(3,"img",7),o(4,"h1",8),a(5,"Checklist de Montacargas"),r(),o(6,"div",9)(7,"div",10),u("click",function(){m(e);let i=d();return p(i.isProfileMenuOpen.set(!i.isProfileMenuOpen()))}),f(8,"i",11),r(),C(9,Xe,10,2),r()()(),o(10,"div",12)(11,"div",13)(12,"h2",14),a(13),r(),o(14,"p",15),a(15,"Montacargas Asignado: "),o(16,"strong"),a(17),r()(),o(18,"p",15),a(19,"Turno: "),o(20,"strong"),a(21),r()()(),o(22,"div",16)(23,"h3",17),a(24,"Inspecci\xF3n de Seguridad Diaria"),r(),o(25,"p",18),a(26,"Completa los puntos de revisi\xF3n antes de iniciar tu operaci\xF3n para garantizar la seguridad."),r(),o(27,"button",19),u("click",function(){m(e);let i=d();return p(i.goToSelectionView())}),f(28,"i",20),o(29,"span"),a(30,"INICIAR NUEVO CHECKLIST"),r()()(),o(31,"h3",21),a(32,"Accesos R\xE1pidos"),r(),o(33,"div",22)(34,"button",23),u("click",function(){m(e);let i=d();return p(i.goToHistory())}),f(35,"i",24),o(36,"span",25),a(37,"Historial de Inspecciones"),r()(),o(38,"button",26),u("click",function(){m(e);let i=d();return p(i.reportIncident())}),f(39,"i",27),o(40,"span",25),a(41,"Reportar Incidencia Grave"),r()(),o(42,"button",26),u("click",function(){m(e);let i=d();return p(i.consultManuals())}),f(43,"i",28),o(44,"span",25),a(45,"Consultar Manuales"),r()()()(),o(46,"footer",29)(47,"p",30),a(48),r()()()}if(l&2){let e=d();c(3),v("src",e.logo,j),c(6),x(e.isProfileMenuOpen()?9:-1),c(4),B("\xA1Buenos d\xEDas, ",e.userData.name,"!"),c(4),k(e.userData.assignedForklift),c(4),k(e.userData.shift),c(27),B("\xA9 ",e.currentYear," Coca-Cola FEMSA. Todos los derechos reservados.")}}function et(l,t){if(l&1&&(o(0,"option",71),a(1),r()),l&2){let e=t.$implicit;ke("background-color",e.color),v("value",e.name),c(),k(e.name)}}function tt(l,t){if(l&1&&(o(0,"option",55),a(1),r()),l&2){let e=t.$implicit;v("value",e),c(),k(e)}}function it(l,t){if(l&1){let e=b();o(0,"div",68)(1,"div",72),f(2,"span",73),o(3,"div")(4,"p",74),a(5),r(),o(6,"p",58),a(7),r()()(),o(8,"button",75),u("click",function(){let i=m(e).$implicit,s=d(2);return p(s.startChecklist(i))}),a(9," Verificar "),r()()}if(l&2){let e=t.$implicit,n=d(2);c(2),w("bg-gray-400",n.getForkliftStatus(e.id)==="pending")("bg-green-500",n.getForkliftStatus(e.id)==="ok")("bg-red-500",n.getForkliftStatus(e.id)==="issue"),c(3),k(e.name),c(2),be("",e.model," (",e.id,")")}}function nt(l,t){l&1&&(o(0,"div",69),f(1,"i",76),o(2,"p",77),a(3,"No se encontraron montacargas."),r()())}function ot(l,t){l&1&&(o(0,"p",79),a(1,"Complete los detalles de la sesi\xF3n para guardar."),r())}function rt(l,t){if(l&1){let e=b();o(0,"div",70)(1,"button",78),u("click",function(){m(e);let i=d(2);return p(i.saveSession())}),a(2," Guardar Sesi\xF3n "),r(),C(3,ot,2,0,"p",79),r()}if(l&2){let e=d(2);c(),v("disabled",!e.isSessionInfoValid()),c(2),x(e.isSessionInfoValid()?-1:3)}}function at(l,t){if(l&1){let e=b();o(0,"div",1)(1,"button",37),u("click",function(){m(e);let i=d();return p(i.goToHomeView())}),f(2,"i",38),o(3,"span"),a(4,"Volver al Inicio"),r()(),o(5,"header",13)(6,"h1",39),a(7,"Seleccionar Montacargas"),r(),o(8,"p",15),a(9,"Complete los checklists para la sesi\xF3n actual."),r()(),o(10,"div",40)(11,"h2",41),a(12,"Detalles de la Sesi\xF3n"),r(),o(13,"div",42)(14,"div")(15,"label",43),a(16,"Nombre del Inspector"),r(),o(17,"input",44),O("ngModelChange",function(i){m(e);let s=d();return N(s.sessionInspector,i)||(s.sessionInspector=i),p(i)}),r()(),o(18,"div")(19,"label",45),a(20,"Tripulaci\xF3n"),r(),o(21,"select",46),O("ngModelChange",function(i){m(e);let s=d();return N(s.sessionCrew,i)||(s.sessionCrew=i),p(i)}),o(22,"option",47),a(23,"Seleccione tripulaci\xF3n"),r(),I(24,et,2,4,"option",48,Ye),r()(),o(26,"div")(27,"label",49),a(28,"Turno"),r(),o(29,"select",50),O("ngModelChange",function(i){m(e);let s=d();return N(s.sessionShift,i)||(s.sessionShift=i),p(i)}),o(30,"option",51),a(31,"Turno 1"),r(),o(32,"option",52),a(33,"Turno 2"),r()()(),o(34,"div")(35,"label",53),a(36,"Ubicaci\xF3n / \xC1rea"),r(),o(37,"select",54),O("ngModelChange",function(i){m(e);let s=d();return N(s.sessionLocation,i)||(s.sessionLocation=i),p(i)}),o(38,"option",47),a(39,"Seleccione un \xE1rea"),r(),I(40,tt,2,2,"option",55,ve),r()()()(),o(42,"div",56)(43,"div",57)(44,"div")(45,"p",58),a(46,"Completados"),r(),o(47,"p",59),a(48),r()(),o(49,"div")(50,"p",58),a(51,"Con Incidencias"),r(),o(52,"p",60),a(53),r()(),o(54,"div")(55,"p",58),a(56,"Pendientes"),r(),o(57,"p",59),a(58),r()()(),o(59,"div",9)(60,"input",61),O("ngModelChange",function(i){m(e);let s=d();return N(s.searchTerm,i)||(s.searchTerm=i),p(i)}),r(),f(61,"i",62),r()(),o(62,"div",63)(63,"h2",64),a(64,"Montacargas"),r(),o(65,"button",65),u("click",function(){m(e);let i=d();return p(i.openScanner())}),f(66,"i",66),o(67,"span"),a(68,"Escanear QR"),r()()(),o(69,"div",67),I(70,it,10,9,"div",68,Je),C(72,nt,4,0,"div",69),r(),C(73,rt,4,2,"div",70),r()}if(l&2){let e=d();c(17),D("ngModel",e.sessionInspector),c(4),ke("background-color",e.sessionCrew()?e.selectedCrewColor():""),w("text-black",e.sessionCrew())("font-bold",e.sessionCrew()),D("ngModel",e.sessionCrew),c(3),T(e.crews()),c(5),D("ngModel",e.sessionShift),c(8),D("ngModel",e.sessionLocation),c(3),T(e.areas()),c(8),be("",e.sessionSummary().completed," / ",e.sessionSummary().total),c(4),w("text-red-500",e.sessionSummary().issues>0)("text-gray-800",e.sessionSummary().issues===0)("dark:text-white",e.sessionSummary().issues===0),c(),k(e.sessionSummary().issues),c(5),k(e.sessionSummary().total-e.sessionSummary().completed),c(2),D("ngModel",e.searchTerm),c(10),T(e.filteredForklifts()),c(2),x(e.filteredForklifts().length===0?72:-1),c(),x(e.sessionHasChanges()?73:-1)}}function st(l,t){if(l&1){let e=b();o(0,"app-checklist-modal",80),u("save",function(i){m(e);let s=d();return p(s.handleChecklistSave(i))})("close",function(){m(e);let i=d();return p(i.handleChecklistClose())}),r()}if(l&2){let e=d();v("inspection",e.selectedForklift())}}function lt(l,t){if(l&1){let e=b();o(0,"app-qr-scanner",81),u("scanSuccess",function(i){m(e);let s=d();return p(s.handleScanSuccess(i))})("scanError",function(i){m(e);let s=d();return p(s.handleScanError(i))})("close",function(){m(e);let i=d();return p(i.isScannerOpen.set(!1))}),r()}}function ct(l,t){if(l&1){let e=b();o(0,"app-incident-report-modal",82),u("save",function(i){m(e);let s=d();return p(s.handleSaveIncident(i))})("close",function(){m(e);let i=d();return p(i.isIncidentModalOpen.set(!1))}),r()}if(l&2){let e=d();v("forklifts",e.forklifts())}}function dt(l,t){if(l&1){let e=b();o(0,"app-manuals-modal",83),u("close",function(){m(e);let i=d();return p(i.isManualsModalOpen.set(!1))}),r()}}function mt(l,t){if(l&1&&(o(0,"div",84),a(1),r()),l&2){let e=d();w("bg-gray-800",!e.toastIsError())("bg-red-600",e.toastIsError()),c(),B(" ",e.toastMessage()," ")}}var ie=class ie{constructor(){this.dbService=Q(Me);this.router=Q(Se);this.view=g("home");this.logo=Ie;this.currentYear=new Date().getFullYear();this.userData={name:"Juan P\xE9rez",id:"EMP-0123",assignedForklift:"M-05",shift:"Matutino (06:00 - 14:00)"};this.forklifts=g(Te);this.crews=g(Ve);this.areas=g(Ae);this.currentSession=g(new Map);this.sessionInspector=g("");this.sessionShift=g("1");this.sessionCrew=g("");this.sessionLocation=g("");this.selectedForklift=g(null);this.isChecklistModalOpen=g(!1);this.isScannerOpen=g(!1);this.isProfileMenuOpen=g(!1);this.isIncidentModalOpen=g(!1);this.isManualsModalOpen=g(!1);this.toastMessage=g(null);this.toastIsError=g(!1);this.searchTerm=g("");this.filteredForklifts=z(()=>{let t=this.searchTerm().toLowerCase();return t?this.forklifts().filter(e=>e.name.toLowerCase().includes(t)||e.model.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)):this.forklifts()});this.sessionSummary=z(()=>{let t=this.currentSession(),e=this.forklifts().length,n=t.size,i=0;for(let s of t.values())s.checklist.some(_=>_.status==="issue")&&i++;return{total:e,completed:n,issues:i}});this.selectedCrewColor=z(()=>{let t=this.crews().find(e=>e.name===this.sessionCrew());return t?t.color:"transparent"});this.sessionHasChanges=z(()=>this.currentSession().size>0);this.isSessionInfoValid=z(()=>this.sessionInspector().trim()!==""&&this.sessionLocation().trim()!==""&&this.sessionCrew().trim()!=="")}goToSelectionView(){this.view.set("selection")}goToHomeView(){this.view.set("home")}goToHistory(){this.router.navigate(["/history"])}reportIncident(){this.isIncidentModalOpen.set(!0)}consultManuals(){this.isManualsModalOpen.set(!0)}logout(){this.isProfileMenuOpen.set(!1),this.showToast("Sesi\xF3n cerrada exitosamente.")}async handleSaveIncident(t){try{await this.dbService.saveIncident(L(U({},t),{reporter:this.userData.name,timestamp:Date.now()})),this.isIncidentModalOpen.set(!1),this.showToast("Incidencia reportada con \xE9xito.")}catch(e){console.error("Failed to save incident:",e),this.showToast("Error al reportar la incidencia.",!0)}}getForkliftStatus(t){let e=this.currentSession().get(t);return e?e.checklist.some(i=>i.status==="issue")?"issue":"ok":"pending"}startChecklist(t){let e=this.currentSession().get(t.id);e||(e={forkliftId:t.id,forkliftName:t.name,checklist:JSON.parse(JSON.stringify(Fe)),inspector:"",shift:"",crew:"",location:"",odometer:"",timestamp:0,inspectionDate:new Date().toISOString().split("T")[0]}),this.selectedForklift.set(e),this.isChecklistModalOpen.set(!0)}handleChecklistSave(t){this.currentSession.update(e=>(e.set(t.forkliftId,t),new Map(e))),this.isChecklistModalOpen.set(!1),this.showToast("Checklist guardado en la sesi\xF3n actual.")}handleChecklistClose(){this.isChecklistModalOpen.set(!1)}openScanner(){this.isScannerOpen.set(!0)}handleScanSuccess(t){this.isScannerOpen.set(!1);let e=this.forklifts().find(n=>n.id===t);e?this.startChecklist(e):this.showToast("Montacargas no encontrado!",!0)}handleScanError(t){this.isScannerOpen.set(!1),this.showToast(`Error de escaneo: ${t}`,!0)}async saveSession(){if(!this.isSessionInfoValid()){this.showToast("Por favor, complete Nombre del Inspector, Tripulaci\xF3n y Ubicaci\xF3n.",!0);return}let t=[];if(this.currentSession().forEach(e=>{let n=L(U({},e),{inspector:this.sessionInspector(),shift:this.sessionShift(),crew:this.sessionCrew(),location:this.sessionLocation(),timestamp:Date.now()});t.push(n)}),t.length===0){this.showToast("No hay checklists para guardar en esta sesi\xF3n.",!0);return}try{await this.dbService.saveSession({id:Date.now(),inspections:t}),this.showToast("\xA1Sesi\xF3n guardada exitosamente!"),this.currentSession.set(new Map),this.sessionInspector.set(""),this.sessionLocation.set(""),this.sessionCrew.set(""),this.sessionShift.set("1")}catch(e){console.error("Failed to save session:",e),this.showToast("Error al guardar la sesi\xF3n.",!0)}}showToast(t,e=!1){this.toastIsError.set(e),this.toastMessage.set(t),setTimeout(()=>this.toastMessage.set(null),3e3)}};ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=A({type:ie,selectors:[["app-checklist"]],decls:7,vars:6,consts:[[1,"bg-gray-50","dark:bg-gray-800","min-h-screen"],[1,"container","mx-auto","p-4","max-w-2xl"],[3,"inspection"],[3,"forklifts"],[1,"fixed","bottom-24","left-1/2","-translate-x-1/2","text-white","py-2","px-6","rounded-full","shadow-lg","animate-fade-in-out",3,"bg-gray-800","bg-red-600"],[1,"bg-white","dark:bg-dark-card","shadow-sm","sticky","top-0","z-10"],[1,"container","mx-auto","p-4","flex","justify-between","items-center","max-w-2xl"],["alt","Logo Coca-Cola FEMSA",1,"h-10",3,"src"],[1,"text-xl","font-bold","text-gray-700","dark:text-gray-200","hidden","sm:block"],[1,"relative"],[1,"w-10","h-10","bg-gray-200","dark:bg-gray-700","rounded-full","flex","items-center","justify-center","cursor-pointer",3,"click"],[1,"fas","fa-user","text-xl","text-gray-500","dark:text-gray-400"],[1,"p-4","max-w-2xl","mx-auto"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-800","dark:text-white"],[1,"text-gray-600","dark:text-gray-400"],[1,"bg-white","dark:bg-dark-card","rounded-lg","shadow-lg","p-6","mb-6"],[1,"text-xl","font-semibold","mb-2","text-gray-800","dark:text-white"],[1,"text-gray-600","dark:text-gray-400","mb-4"],[1,"w-full","bg-coca-cola-red","text-white","font-bold","py-3","px-4","rounded-lg","shadow-md","hover:bg-red-700","transition-colors","flex","items-center","justify-center","gap-2","text-lg",3,"click"],[1,"fas","fa-play-circle"],[1,"text-lg","font-semibold","text-gray-700","dark:text-gray-200","mb-3"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4","mb-6"],[1,"bg-white","dark:bg-dark-card","p-4","rounded-lg","shadow","border-2","border-coca-cola-red","text-coca-cola-red","font-semibold","hover:bg-red-50","dark:hover:bg-red-900/20","transition-colors","flex","flex-col","items-center","justify-center","text-center","gap-2","h-32",3,"click"],[1,"fas","fa-history","text-2xl"],[1,"text-sm"],[1,"bg-white","dark:bg-dark-card","p-4","rounded-lg","shadow","border","border-gray-300","dark:border-gray-600","text-gray-700","dark:text-gray-300","font-semibold","hover:bg-gray-100","dark:hover:bg-dark-accent","transition-colors","flex","flex-col","items-center","justify-center","text-center","gap-2","h-32",3,"click"],[1,"fas","fa-exclamation-triangle","text-2xl"],[1,"fas","fa-book","text-2xl"],[1,"text-center","p-4","mt-auto"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"fixed","inset-0","z-10",3,"click"],[1,"absolute","right-0","mt-2","w-48","bg-white","dark:bg-dark-card","rounded-md","shadow-lg","py-1","z-20","animate-fade-in-fast"],[1,"px-4","py-2","text-sm","text-gray-700","dark:text-gray-200"],[1,"font-semibold"],[1,"border-t","border-gray-200","dark:border-gray-700","my-1"],["href","#",1,"block","px-4","py-2","text-sm","text-gray-700","dark:text-gray-200","hover:bg-gray-100","dark:hover:bg-dark-accent","w-full","text-left",3,"click"],[1,"text-coca-cola-red","font-semibold","mb-4","flex","items-center","gap-2","hover:underline",3,"click"],[1,"fas","fa-arrow-left"],[1,"text-3xl","font-bold","text-gray-800","dark:text-white"],[1,"bg-white","dark:bg-dark-card","rounded-lg","shadow","p-4","mb-6"],[1,"text-xl","font-semibold","mb-4","text-gray-700","dark:text-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","inspector",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","inspector",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],["for","crew",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","crew",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white","transition-colors",3,"ngModelChange","ngModel"],["value","","disabled",""],[1,"text-black","font-medium",3,"value","background-color"],["for","shift",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","shift",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["for","location",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","location",1,"mt-1","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-coca-cola-red","focus:ring","focus:ring-coca-cola-red","focus:ring-opacity-50","bg-gray-50","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],[3,"value"],[1,"mb-4"],[1,"grid","grid-cols-3","gap-2","text-center","bg-white","dark:bg-dark-card","p-2","rounded-lg","shadow","mb-4"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"font-bold","text-lg","text-gray-800","dark:text-white"],[1,"font-bold","text-lg"],["type","text","placeholder","Buscar por nombre, modelo o ID...",1,"w-full","pl-10","pr-4","py-2","rounded-lg","border","border-gray-300","dark:border-gray-600","focus:ring-coca-cola-red","focus:border-coca-cola-red","bg-white","dark:bg-dark-accent","dark:text-white",3,"ngModelChange","ngModel"],[1,"fas","fa-search","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-200"],[1,"bg-gray-700","text-white","px-4","py-2","rounded-lg","shadow","hover:bg-gray-800","transition-colors","flex","items-center","gap-2",3,"click"],[1,"fas","fa-qrcode"],[1,"space-y-3"],[1,"bg-white","dark:bg-dark-card","rounded-lg","shadow","p-4","flex","items-center","justify-between"],[1,"text-center","py-6","bg-white","dark:bg-dark-card","rounded-lg","shadow"],[1,"mt-8"],[1,"text-black","font-medium",3,"value"],[1,"flex","items-center","gap-4"],[1,"w-3","h-3","rounded-full"],[1,"font-semibold","text-gray-800","dark:text-white"],[1,"text-coca-cola-red","font-semibold","py-1","px-3","rounded-md","hover:bg-red-50","dark:hover:bg-dark-accent","transition-colors",3,"click"],[1,"fas","fa-search","text-3xl","text-gray-400","mb-3"],[1,"text-gray-500","dark:text-gray-400"],[1,"w-full","bg-coca-cola-red","text-white","font-bold","py-3","px-4","rounded-lg","shadow-lg","hover:bg-red-700","transition-colors","disabled:bg-red-400","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-center","text-red-500","text-sm","mt-2"],[3,"save","close","inspection"],[3,"scanSuccess","scanError","close"],[3,"save","close","forklifts"],[3,"close"],[1,"fixed","bottom-24","left-1/2","-translate-x-1/2","text-white","py-2","px-6","rounded-full","shadow-lg","animate-fade-in-out"]],template:function(e,n){e&1&&(C(0,Ze,49,6,"div",0)(1,at,74,23,"div",1),C(2,st,1,1,"app-checklist-modal",2),C(3,lt,1,0,"app-qr-scanner"),C(4,ct,1,1,"app-incident-report-modal",3),C(5,dt,1,0,"app-manuals-modal"),C(6,mt,2,5,"div",4)),e&2&&(x(n.view()==="home"?0:1),c(2),x(n.isChecklistModalOpen()&&n.selectedForklift()?2:-1),c(),x(n.isScannerOpen()?3:-1),c(),x(n.isIncidentModalOpen()?4:-1),c(),x(n.isManualsModalOpen()?5:-1),c(),x(n.toastMessage()?6:-1))},dependencies:[Y,de,me,$,ce,H,K,ge,he,_e,Ce],encapsulation:2,changeDetection:0});var Ne=ie;export{Ne as ChecklistComponent};
