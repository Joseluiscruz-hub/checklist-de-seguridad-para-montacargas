import{a as _}from"./chunk-ODD4VDWD.js";import{a as I}from"./chunk-3S2IHX64.js";import{a as k}from"./chunk-RGZFVPZW.js";import{$a as c,Ga as h,Qa as l,Ra as m,S as p,Za as e,_a as t,bb as b,ca as E,db as f,eb as x,ib as S,jb as g,lb as n,mb as y,nb as u,ra as o,zb as w}from"./chunk-HPYFT727.js";function D(a,d){if(a&1&&(e(0,"div",5)(1,"p",16),n(2),t()()),a&2){let i=x();o(2),y(i.storageWarning())}}function M(a,d){if(a&1&&(e(0,"div",6)(1,"h3",17),c(2,"i",18),n(3,"Almacenamiento Local "),t(),e(4,"div",19)(5,"div")(6,"div",20)(7,"span",3),n(8,"Uso del almacenamiento"),t(),e(9,"span",21),n(10),t()(),e(11,"div",22),c(12,"div",23),t()(),e(13,"div",24)(14,"div")(15,"p",3),n(16,"Utilizado"),t(),e(17,"p",21),n(18),t()(),e(19,"div")(20,"p",3),n(21,"Disponible"),t(),e(22,"p",21),n(23),t()()()()()),a&2){let i=x();o(10),u(" ",i.storageInfo().usagePercentage.toFixed(1),"% "),o(2),S("width",i.storageInfo().usagePercentage,"%"),g("bg-green-500",i.storageInfo().usagePercentage<50)("bg-yellow-500",i.storageInfo().usagePercentage>=50&&i.storageInfo().usagePercentage<80)("bg-red-500",i.storageInfo().usagePercentage>=80),o(6),u(" ",i.storageInfo().usageMB.toFixed(2)," MB "),o(5),u(" ",i.storageInfo().quotaMB.toFixed(2)," MB ")}}function T(a,d){a&1&&(e(0,"div",13),c(1,"i",25),e(2,"span"),n(3,"Sincronizando..."),t()())}function P(a,d){a&1&&(e(0,"span"),n(1,"Sincronizar"),t())}function F(a,d){if(a&1&&(e(0,"div",26),n(1),t()),a&2){let i=x();g("bg-gray-800",!i.toastIsError())("bg-red-600",i.toastIsError()),o(),u(" ",i.toastMessage()," ")}}var r=class r{constructor(){this.themeService=p(_);this.dbService=p(k);this.storageService=p(I);this.isDarkMode=this.themeService.isDarkMode;this.toastMessage=E(null);this.toastIsError=E(!1);this.isSyncing=E(!1);this.storageInfo=this.storageService.storageInfo;this.storageWarning=w(()=>this.storageService.getStorageWarning())}ngOnInit(){this.storageService.checkStorage()}toggleTheme(){this.themeService.toggleTheme()}async clearData(){if(confirm("\xBFEst\xE1 seguro de que desea eliminar todos los datos locales? Esta acci\xF3n no se puede deshacer."))try{await this.dbService.clearDatabase(),await this.storageService.checkStorage(),this.showToast("Todos los datos locales han sido eliminados.")}catch(i){console.error("Failed to clear data:",i),this.showToast("Error al eliminar los datos.",!0)}}syncData(){this.isSyncing.set(!0),setTimeout(()=>{Math.random()>.5?this.showToast("Sincronizaci\xF3n completada con \xE9xito."):this.showToast("Fallo en la sincronizaci\xF3n. Intente de nuevo.",!0),this.isSyncing.set(!1)},2e3)}showToast(d,i=!1){this.toastIsError.set(i),this.toastMessage.set(d),setTimeout(()=>this.toastMessage.set(null),3e3)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=h({type:r,selectors:[["app-settings"]],decls:38,vars:13,consts:[[1,"container","mx-auto","p-4","max-w-2xl"],[1,"mb-6"],[1,"text-3xl","font-bold","text-gray-800","dark:text-white"],[1,"text-gray-600","dark:text-gray-400"],[1,"space-y-6"],[1,"bg-yellow-50","dark:bg-yellow-900/20","border","border-yellow-400","dark:border-yellow-600","rounded-lg","p-4"],[1,"bg-white","dark:bg-dark-card","rounded-lg","shadow","p-4"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-800","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"relative","inline-flex","items-center","h-6","rounded-full","w-11","transition-colors",3,"click"],[1,"inline-block","w-4","h-4","transform","bg-white","rounded-full","transition-transform"],[1,"bg-blue-600","text-white","px-4","py-2","rounded-lg","shadow","hover:bg-blue-700","transition-colors","disabled:bg-blue-400","disabled:cursor-not-allowed","w-36","text-center",3,"click","disabled"],[1,"flex","items-center","justify-center"],[1,"bg-red-600","text-white","px-4","py-2","rounded-lg","shadow","hover:bg-red-700","transition-colors",3,"click"],[1,"fixed","bottom-24","left-1/2","-translate-x-1/2","text-white","py-2","px-6","rounded-full","shadow-lg","animate-fade-in-out",3,"bg-gray-800","bg-red-600"],[1,"text-sm","text-yellow-800","dark:text-yellow-200"],[1,"text-lg","font-semibold","text-gray-800","dark:text-white","mb-3"],[1,"fas","fa-database","mr-2"],[1,"space-y-3"],[1,"flex","justify-between","text-sm","mb-1"],[1,"font-semibold","text-gray-800","dark:text-white"],[1,"w-full","bg-gray-200","dark:bg-gray-700","rounded-full","h-3"],[1,"h-3","rounded-full","transition-all","duration-300"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"fas","fa-spinner","fa-spin","mr-2"],[1,"fixed","bottom-24","left-1/2","-translate-x-1/2","text-white","py-2","px-6","rounded-full","shadow-lg","animate-fade-in-out"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"header",1)(2,"h1",2),n(3,"Ajustes"),t(),e(4,"p",3),n(5,"Administre los ajustes de la aplicaci\xF3n."),t()(),e(6,"div",4),l(7,D,3,1,"div",5),l(8,M,24,11,"div",6),e(9,"div",6)(10,"div",7)(11,"div")(12,"h3",8),n(13,"Modo Oscuro"),t(),e(14,"p",9),n(15,"Reduce la fatiga visual con poca luz."),t()(),e(16,"button",10),f("click",function(){return s.toggleTheme()}),c(17,"span",11),t()()(),e(18,"div",6)(19,"div",7)(20,"div")(21,"h3",8),n(22,"Sincronizaci\xF3n de Datos"),t(),e(23,"p",9),n(24,"Sincronice sus datos de inspecci\xF3n con el servidor."),t()(),e(25,"button",12),f("click",function(){return s.syncData()}),l(26,T,4,0,"div",13)(27,P,2,0,"span"),t()()(),e(28,"div",6)(29,"div",7)(30,"div")(31,"h3",8),n(32,"Gesti\xF3n de Datos"),t(),e(33,"p",9),n(34,"Elimine todos los datos de inspecci\xF3n almacenados localmente."),t()(),e(35,"button",14),f("click",function(){return s.clearData()}),n(36," Limpiar Datos "),t()()()()(),l(37,F,2,5,"div",15)),i&2&&(o(7),m(s.storageWarning()?7:-1),o(),m(s.storageInfo()?8:-1),o(8),g("bg-coca-cola-red",s.isDarkMode())("bg-gray-300",!s.isDarkMode()),o(),g("translate-x-6",s.isDarkMode())("translate-x-1",!s.isDarkMode()),o(8),b("disabled",s.isSyncing()),o(),m(s.isSyncing()?26:27),o(11),m(s.toastMessage()?37:-1))},encapsulation:2,changeDetection:0});var C=r;export{C as SettingsComponent};
